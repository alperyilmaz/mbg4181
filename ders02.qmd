---
title: "Tidyverse Dosya Okuma, Select/Filter"
subtitle: "MBG4181 Biyolojik Veri Analizi ve Görüntüleme - Ders2"
author: "Alper Yılmaz"
date: 2025-03-07
format:
  revealjs:
    chalkboard: true
    css: custom.css
    smaller: true
    scrollable: true
    controls: true
    touch: true
    history: false
    progress: true
    slide-number: c/t
typora-copy-images-to: images
webr:
  packages: ['dplyr','unvotes','lubridate','scales','ggplot2','DT'] # Install R packages on document open
  autoload-packages: false       # Disable automatic loading of packages
  show-startup-message: true     # Disable displaying status of webR initialization
  #render-df: gt-interactive
filters:
  - webr
---

## Önce keki yiyelim

```{webr}
library(dplyr)
library(lubridate)
library(scales)
library(unvotes)
library(ggplot2)

unvotes <- un_votes |>
  inner_join(un_roll_calls, by = "rcid") |>
  inner_join(un_roll_call_issues, by = "rcid")
```

## 

```{webr}
#| label: plot-yearly-yes-issue
#| message: false
#| fig-width: 12
#| fig-height: 6

unvotes |>
  filter(country %in% c("United Kingdom", "United States", "Turkey")) |>
  mutate(year = year(date)) |>
  group_by(country, year, issue) |>
  summarize(percent_yes = mean(vote == "yes")) |>
  ggplot(mapping = aes(x = year, y = percent_yes, color = country)) +
  geom_point(alpha = 0.4) +
  geom_smooth(method = "loess", se = FALSE) +
  facet_wrap(~issue) +
  scale_y_continuous(labels = percent) +
  labs(
    title = "Percentage of 'Yes' votes in the UN General Assembly",
    subtitle = "1946 to 2019",
    y = "% Yes",
    x = "Year",
    color = "Country"
  )
```

##

*unvotes* veri setindeki ülke isimleri aşağıdaki gibidir. Bu ülkelerden birkaçını seçip, bir önceki slaytta ülke ismini değiştirip, grafiği tekrar oluşturunuz.

```{webr}
#| label: list-countries

unvotes |> select(country) |> arrange(country) |> distinct() |> print(n=200)
```
