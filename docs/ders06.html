<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.29">

  <meta name="author" content="Alper Yılmaz">
  <meta name="dcterms.date" content="2025-04-18">
  <title>MBG4181 Biyolojik Veri Analizi ve Görüntüleme – Tidy Text Mining with {tidytext}</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-f563837468303362081e247dddd440d0.css">
  <link rel="stylesheet" href="custom.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Tidy Text Mining with {tidytext}</h1>
  <p class="subtitle">MBG4181 Biyolojik Veri Analizi ve Görüntüleme - Ders6</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Alper Yılmaz 
</div>
</div>
</div>

  <p class="date">2025-04-18</p>
</section>
<section class="slide level2">

<p>Contents are modified from <a href="https://github.com/juliasilge/tidytext-tutorial/">github.com/juliasilge/tidytext-tutorial</a></p>
</section>
<section id="text-as-data" class="slide level2">
<h2>Text as data</h2>
<p>Consider the following sentence spanning multiple lines in a book or article.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>sample_text <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">line=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">text=</span><span class="fu">c</span>(<span class="st">"The quick brown fox jumps over"</span>, <span class="st">"the lazy dog."</span>))</span>
<span id="cb1-2"><a></a>sample_text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
   line text                          
  &lt;dbl&gt; &lt;chr&gt;                         
1     1 The quick brown fox jumps over
2     2 the lazy dog.                 </code></pre>
</div>
</div>
<p>This is not tidy! How can we count, filter or join external data with this text?</p>
<p>Tidy Data Principles + Text Mining = tidytext</p>
</section>
<section class="slide level2">


<img data-src="images/tidytext_repo.png" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">
<p><a href="https://github.com/juliasilge/tidytext" class="uri">https://github.com/juliasilge/tidytext</a></p>
</div>
</section>
<section class="slide level2">


<img data-src="images/cover.png" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">
<p><a href="https://tidytextmining.com/" class="uri">https://tidytextmining.com/</a></p>
</div>
</section>
<section id="packages" class="slide level2">
<h2>Packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a></a><span class="fu">library</span>(tidytext)</span>
<span id="cb3-3"><a></a><span class="fu">library</span>(stopwords)</span>
<span id="cb3-4"><a></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb3-5"><a></a><span class="fu">library</span>(janeaustenr)</span>
<span id="cb3-6"><a></a><span class="fu">library</span>(widyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tidy-text" class="slide level2">
<h2>Tidy text</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>sample_text <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a></a>    <span class="fu">unnest_tokens</span>(word, text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
   line word 
  &lt;dbl&gt; &lt;chr&gt;
1     1 the  
2     1 quick
3     1 brown
4     1 fox  
5     1 jumps
6     1 over 
7     2 the  
8     2 lazy 
9     2 dog  </code></pre>
</div>
</div>
<p>Now, we have tidy data, <em>one-token-per-row</em>. All functions in <em>dplyr</em>, <em>tidyr</em> are available for complex analysis.</p>
<div class="footer">
<p>Please go over examples about <a href="https://juliasilge.github.io/tidytext/reference/unnest_tokens.html">unnest_tokens()</a> function and find out how to extract letters instead of words</p>
</div>
</section>
<section id="gathering-more-data" class="slide level2">
<h2>Gathering more data</h2>
<p>You can access the full text of many public domain works from <a href="https://www.gutenberg.org/">Project Gutenberg</a> using the {gutenbergr} package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">library</span>(gutenbergr)</span>
<span id="cb6-2"><a></a></span>
<span id="cb6-3"><a></a>full_text <span class="ot">&lt;-</span> <span class="fu">gutenberg_download</span>(<span class="dv">158</span>)</span>
<span id="cb6-4"><a></a></span>
<span id="cb6-5"><a></a><span class="fu">head</span>(full_text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  gutenberg_id text            
         &lt;int&gt; &lt;chr&gt;           
1          158 "Emma"          
2          158 ""              
3          158 "by Jane Austen"
4          158 ""              
5          158 ""              
6          158 "Contents"      </code></pre>
</div>
</div>
<div class="footer">
<p><strong>Note</strong>: If <em>gutenberg_download()</em> function time outs then please install the package via <code>devtools::install_github("ropensci/gutenbergr")</code></p>
</div>
</section>
<section class="slide level2">

<p>For reference, here’s the first 30 lines of <em>Emma</em> by <em>Jane Austen</em> at Gutenberg Project</p>
<pre><code>The Project Gutenberg eBook of Emma, by Jane Austen

This eBook is for the use of anyone anywhere in the United States and
most other parts of the world at no cost and with almost no restrictions
whatsoever. You may copy it, give it away or re-use it under the terms
of the Project Gutenberg License included with this eBook or online at
www.gutenberg.org. If you are not located in the United States, you
will have to check the laws of the country where you are located before
using this eBook.

Title: Emma

Author: Jane Austen

Release Date: August, 1994 [eBook #158]
[Most recently updated: December 14, 2021]

Language: English


Produced by: An Anonymous Volunteer and David Widger

*** START OF THE PROJECT GUTENBERG EBOOK EMMA ***




Emma

by Jane Austen</code></pre>
</section>
<section id="your-turn" class="slide level2">
<h2>Your turn</h2>
<p>Please browse Project Gutenberg site and locate ID (<em>EBook-No.</em>) of your favorite book. Then extract the full text.</p>
</section>
<section id="tidying-the-whole-book" class="slide level2 smaller">
<h2>Tidying the whole book</h2>
<p>Adding line numbers is optional, it might be helpful for various calculations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>tidy_book <span class="ot">&lt;-</span> full_text <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a></a>    <span class="fu">mutate</span>(<span class="at">line =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a></a>    <span class="fu">unnest_tokens</span>(word, text)         </span>
<span id="cb9-4"><a></a></span>
<span id="cb9-5"><a></a><span class="fu">glimpse</span>(tidy_book)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 161,113
Columns: 3
$ gutenberg_id &lt;int&gt; 158, 158, 158, 158, 158, 158, 158, 158, 158, 158, 158, 15…
$ line         &lt;int&gt; 1, 3, 3, 3, 6, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13…
$ word         &lt;chr&gt; "emma", "by", "jane", "austen", "contents", "volume", "i"…</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">gutenberg_id</th>
<th style="text-align: right;">line</th>
<th style="text-align: left;">word</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">158</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">emma</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">by</td>
</tr>
<tr class="odd">
<td style="text-align: right;">158</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">jane</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">austen</td>
</tr>
<tr class="odd">
<td style="text-align: right;">158</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">contents</td>
</tr>
<tr class="even">
<td style="text-align: right;">158</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">volume</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="footer">
<p>Did you notice number of rows? That’s side effect of <em>unnest</em>ing.</p>
</div>
</section>
<section id="what-are-the-most-common-words" class="slide level2">
<h2>What are the most common words?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>tidy_book <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a></a>    <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7,359 × 2
   word      n
   &lt;chr&gt; &lt;int&gt;
 1 to     5238
 2 the    5201
 3 and    4896
 4 of     4291
 5 i      3181
 6 a      3125
 7 it     2528
 8 her    2462
 9 was    2398
10 she    2340
# ℹ 7,349 more rows</code></pre>
</div>
</div>
<p>We have very uninteresting words on top of the list. They are called <strong>stop words</strong>.</p>
</section>
<section id="stop-words" class="slide level2 smaller">
<h2>Stop words</h2>
<p>If you have loaded {tidytext} package, a data frame called <em>stop_words</em> is loaded as well. However, that data frame is for English only.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">glimpse</span>(stop_words) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,149
Columns: 2
$ word    &lt;chr&gt; "a", "a's", "able", "about", "above", "according", "accordingl…
$ lexicon &lt;chr&gt; "SMART", "SMART", "SMART", "SMART", "SMART", "SMART", "SMART",…</code></pre>
</div>
</div>
<p>For stop words in other languages you can use {stopwords} package. It contains more sources and languages</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">get_stopwords</span>(<span class="at">language =</span> <span class="st">"tr"</span>, <span class="at">source =</span> <span class="st">"nltk"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53 × 2
   word    lexicon
   &lt;chr&gt;   &lt;chr&gt;  
 1 acaba   nltk   
 2 ama     nltk   
 3 aslında nltk   
 4 az      nltk   
 5 bazı    nltk   
 6 belki   nltk   
 7 biri    nltk   
 8 birkaç  nltk   
 9 birşey  nltk   
10 biz     nltk   
# ℹ 43 more rows</code></pre>
</div>
</div>
</section>
<section id="remove-stop-words" class="slide level2">
<h2>Remove stop words</h2>
<p>Can you guess what this code will do?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>tidy_book <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a></a>    <span class="fu">anti_join</span>(<span class="fu">get_stopwords</span>(<span class="at">source =</span> <span class="st">"smart"</span>)) <span class="sc">|&gt;</span>   <span class="co"># OR anti_join(stop_words)</span></span>
<span id="cb17-3"><a></a>    <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a></a>    <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">20</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, <span class="fu">fct_reorder</span>(word, n))) <span class="sc">+</span>  </span>
<span id="cb17-6"><a></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb17-7"><a></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="remove-stop-words-output" class="slide level2 output-location-slide"><h2>Remove stop words</h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="ders06_files/figure-revealjs/unnamed-chunk-11-1.png" class="quarto-figure quarto-figure-center" width="864"></p>
</figure>
</div>
</div>
</div></section><section class="slide level2">


<img data-src="images/tilecounts-1.png" class="r-stretch"></section>
<section>
<section id="sentiment-analysis" class="title-slide slide level1 center">
<h1>Sentiment Analysis</h1>

</section>
<section id="sentiment-lexicons" class="slide level2">
<h2>Sentiment lexicons</h2>
<p>The three general-purpose lexicons are</p>
<ul>
<li><code>AFINN</code> from <a href="http://www2.imm.dtu.dk/pubdb/views/publication_details.php?id=6010">Finn Årup Nielsen</a>,</li>
<li><code>bing</code> from <a href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html">Bing Liu and collaborators</a>, and</li>
<li><code>nrc</code> from <a href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm">Saif Mohammad and Peter Turney</a>.</li>
</ul>
<p><code>tidytext</code> provides a function <code>get_sentiments()</code> to get specific sentiment lexicons without the columns that are not used in that lexicon.</p>
</section>
<section id="sentiment-lexicons-1" class="slide level2">
<h2>Sentiment lexicons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">get_sentiments</span>(<span class="st">"afinn"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,477 × 2
   word       value
   &lt;chr&gt;      &lt;dbl&gt;
 1 abandon       -2
 2 abandoned     -2
 3 abandons      -2
 4 abducted      -2
 5 abduction     -2
 6 abductions    -2
 7 abhor         -3
 8 abhorred      -3
 9 abhorrent     -3
10 abhors        -3
# ℹ 2,467 more rows</code></pre>
</div>
</div>
</section>
<section id="sentiment-lexicons-2" class="slide level2">
<h2>Sentiment lexicons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,786 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 2-faces     negative 
 2 abnormal    negative 
 3 abolish     negative 
 4 abominable  negative 
 5 abominably  negative 
 6 abominate   negative 
 7 abomination negative 
 8 abort       negative 
 9 aborted     negative 
10 aborts      negative 
# ℹ 6,776 more rows</code></pre>
</div>
</div>
</section>
<section id="sentiment-lexicons-3" class="slide level2">
<h2>Sentiment lexicons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">get_sentiments</span>(<span class="st">"nrc"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13,872 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 abacus      trust    
 2 abandon     fear     
 3 abandon     negative 
 4 abandon     sadness  
 5 abandoned   anger    
 6 abandoned   fear     
 7 abandoned   negative 
 8 abandoned   sadness  
 9 abandonment anger    
10 abandonment fear     
# ℹ 13,862 more rows</code></pre>
</div>
</div>
</section>
<section id="sentiment-lexicons-4" class="slide level2">
<h2>Sentiment lexicons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="co">#get_sentiments("loughran")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="implementing-sentiment-analysis" class="slide level2">
<h2>Implementing sentiment analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>tidy_book <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a></a>    <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a></a>    <span class="fu">count</span>(sentiment, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  sentiment     n
  &lt;chr&gt;     &lt;int&gt;
1 positive   7157
2 negative   4810</code></pre>
</div>
</div>
</section>
<section id="implementing-sentiment-analysis-1" class="slide level2">
<h2>Implementing sentiment analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>tidy_book <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a></a>    <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)) <span class="sc">|&gt;</span>        </span>
<span id="cb27-3"><a></a>    <span class="fu">count</span>(sentiment, word, <span class="at">sort =</span> <span class="cn">TRUE</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,544 × 3
   sentiment word       n
   &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;
 1 negative  miss     599
 2 positive  well     401
 3 positive  good     359
 4 positive  great    264
 5 positive  like     200
 6 positive  better   173
 7 negative  poor     136
 8 positive  enough   129
 9 positive  happy    125
10 positive  love     117
# ℹ 1,534 more rows</code></pre>
</div>
</div>
</section>
<section id="lets-plot-sentiments" class="slide level2">
<h2>Let’s plot sentiments</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>tidy_book <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a></a>    <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a></a>    <span class="fu">count</span>(sentiment, word, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-4"><a></a>    <span class="fu">group_by</span>(sentiment) <span class="sc">|&gt;</span></span>
<span id="cb29-5"><a></a>    <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-6"><a></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-7"><a></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(n, <span class="fu">fct_reorder</span>(word, n), <span class="at">fill =</span> sentiment)) <span class="sc">+</span></span>
<span id="cb29-8"><a></a>    <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb29-9"><a></a>    <span class="fu">ylab</span>(<span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb29-10"><a></a>    <span class="fu">xlab</span>(<span class="st">"Number of occurrences"</span>) <span class="sc">+</span></span>
<span id="cb29-11"><a></a>    <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(sentiment), <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb29-12"><a></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="lets-plot-sentiments-output" class="slide level2 output-location-slide"><h2>Let’s plot sentiments</h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="ders06_files/figure-revealjs/unnamed-chunk-18-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div></section><section id="sentiment-across-book" class="slide level2">
<h2>Sentiment across book</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">library</span>(janeaustenr)</span>
<span id="cb30-2"><a></a></span>
<span id="cb30-3"><a></a>austen_books <span class="ot">&lt;-</span> <span class="fu">austen_books</span>() <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a></a>  <span class="fu">group_by</span>(book) <span class="sc">|&gt;</span></span>
<span id="cb30-5"><a></a>  <span class="fu">mutate</span>(<span class="at">linenumber =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb30-6"><a></a>  <span class="fu">ungroup</span>()</span>
<span id="cb30-7"><a></a></span>
<span id="cb30-8"><a></a>austen_books</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 73,422 × 3
   text                    book                linenumber
   &lt;chr&gt;                   &lt;fct&gt;                    &lt;int&gt;
 1 "SENSE AND SENSIBILITY" Sense &amp; Sensibility          1
 2 ""                      Sense &amp; Sensibility          2
 3 "by Jane Austen"        Sense &amp; Sensibility          3
 4 ""                      Sense &amp; Sensibility          4
 5 "(1811)"                Sense &amp; Sensibility          5
 6 ""                      Sense &amp; Sensibility          6
 7 ""                      Sense &amp; Sensibility          7
 8 ""                      Sense &amp; Sensibility          8
 9 ""                      Sense &amp; Sensibility          9
10 "CHAPTER 1"             Sense &amp; Sensibility         10
# ℹ 73,412 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>austen_sentiment <span class="ot">&lt;-</span> austen_books <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a></a>  <span class="fu">inner_join</span>(<span class="fu">get_sentiments</span>(<span class="st">"bing"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a></a>  <span class="fu">mutate</span>(<span class="at">index=</span> linenumber <span class="sc">%/%</span> <span class="dv">80</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-5"><a></a>  <span class="fu">count</span>(book, index , sentiment) <span class="sc">|&gt;</span></span>
<span id="cb32-6"><a></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sentiment, </span>
<span id="cb32-7"><a></a>              <span class="at">values_from =</span> n, </span>
<span id="cb32-8"><a></a>              <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-9"><a></a>  <span class="fu">mutate</span>(<span class="at">sentiment =</span> positive <span class="sc">-</span> negative)</span>
<span id="cb32-10"><a></a></span>
<span id="cb32-11"><a></a>austen_sentiment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 920 × 5
   book                index negative positive sentiment
   &lt;fct&gt;               &lt;dbl&gt;    &lt;int&gt;    &lt;int&gt;     &lt;int&gt;
 1 Sense &amp; Sensibility     0       16       32        16
 2 Sense &amp; Sensibility     1       19       53        34
 3 Sense &amp; Sensibility     2       12       31        19
 4 Sense &amp; Sensibility     3       15       31        16
 5 Sense &amp; Sensibility     4       16       34        18
 6 Sense &amp; Sensibility     5       16       51        35
 7 Sense &amp; Sensibility     6       24       40        16
 8 Sense &amp; Sensibility     7       23       51        28
 9 Sense &amp; Sensibility     8       30       40        10
10 Sense &amp; Sensibility     9       15       19         4
# ℹ 910 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>austen_sentiment <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(index, sentiment, <span class="at">fill =</span> book)) <span class="sc">+</span></span>
<span id="cb34-3"><a></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb34-4"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>book, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="ders06_files/figure-revealjs/unnamed-chunk-21-1.png" class="quarto-figure quarto-figure-center r-stretch" width="864"></section>
<section id="your-turn-1" class="slide level2">
<h2>Your turn</h2>
<ul>
<li>what is the most frequent word in “War and Peace” (gutenberg id=2600)</li>
<li>count letters in same book, which letters are the most frequent?</li>
<li>count letters in “Gadsby” (gutenberg id=47342). Did you notice something strange?</li>
</ul>
</section>
<section id="all-works-of-charles-dickens" class="slide level2">
<h2>All works of Charles Dickens</h2>
<p>Downloading all books and running unnest_tokens on them fills up the memory! Let’s process each file separately, clean it and count words for each book then merge the results. Tet’s use <em>purrr::map</em> for this with our custom function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>counts_from_gutenberg <span class="ot">&lt;-</span> <span class="cf">function</span>(id){</span>
<span id="cb35-2"><a></a>  <span class="fu">gutenberg_download</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a></a>    <span class="fu">unnest_tokens</span>(word, text) <span class="sc">|&gt;</span> </span>
<span id="cb35-4"><a></a>    <span class="fu">anti_join</span>(stop_words, <span class="at">by=</span><span class="st">"word"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb35-5"><a></a>    <span class="fu">count</span>(word)</span>
<span id="cb35-6"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="all-works-of-charles-dickens-1" class="slide level2">
<h2>All works of Charles Dickens</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>all_charles_dickens <span class="ot">&lt;-</span> <span class="fu">gutenberg_works</span>() <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a></a>  <span class="fu">filter</span>(gutenberg_author_id<span class="sc">==</span><span class="dv">37</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a></a>  <span class="fu">mutate</span>(<span class="at">book_content=</span><span class="fu">map</span>(gutenberg_id, counts_from_gutenberg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will download and process <code>all_charles_dickens</code> books.</p>
<p>Remember <em>furrr</em>, we have mentioned last week? You can do file processing in parallel if you like.</p>
</section>
<section id="all-works-of-charles-dickens-2" class="slide level2">
<h2>All works of Charles Dickens</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>all_charles_dickens <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a></a>  <span class="fu">select</span>(title, book_content) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a></a>  <span class="fu">unnest</span>(book_content) <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="footer">
<p>we gathered counts from separate books, so a word is counted multiple times. how can you calculate overall word counts across all books?</p>
</div>
</section></section>
<section>
<section id="tf-idf" class="title-slide slide level1 center">
<h1>TF-IDF</h1>

</section>
<section class="slide level2">

<h3 class="smaller" id="term-frequency">Term frequency</h3>
<p>Term frequency (<em>tf</em>), reports how frequently a word occurs in a document. It is possible that some of these words might be more important in some documents than others. A list of stop words is not a very sophisticated approach to adjusting term frequency for commonly used words.</p>
<h3 id="inserve-document-frequency">Inserve document frequency</h3>
<p>A term’s inverse document frequency (<em>idf</em>), which decreases the weight for commonly used words and increases the weight for words that are not used very much in a collection of documents.</p>
</section>
<section id="tf-idf-1" class="slide level2">
<h2>tf-idf</h2>
<p>The statistic tf-idf is intended to measure how important a word is to a document in a collection (or corpus) of documents, for example, to one novel in a collection of novels or to one website in a collection of websites.</p>
<p><span class="math display">\[idf(\text{term}) = \ln{\left(\frac{n_{\text{documents}}}{n_{\text{documents containing term}}}\right)}\]</span></p>
</section>
<section id="counting-word-frequencies" class="slide level2">
<h2>Counting word frequencies</h2>
<p><em>tidytext</em> package has a function called <em>bind_tf_idf()</em> to calculate the TF-IDF. First, let’s prepare counts per book for <code>austen_books</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>austen_counts <span class="ot">&lt;-</span> austen_books <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a></a>  <span class="fu">count</span>(book, word, <span class="at">sort=</span><span class="cn">TRUE</span>)</span>
<span id="cb38-4"><a></a></span>
<span id="cb38-5"><a></a>austen_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,379 × 3
   book              word      n
   &lt;fct&gt;             &lt;chr&gt; &lt;int&gt;
 1 Mansfield Park    the    6206
 2 Mansfield Park    to     5475
 3 Mansfield Park    and    5438
 4 Emma              to     5239
 5 Emma              the    5201
 6 Emma              and    4896
 7 Mansfield Park    of     4778
 8 Pride &amp; Prejudice the    4331
 9 Emma              of     4291
10 Pride &amp; Prejudice to     4162
# ℹ 40,369 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>austen_counts <span class="sc">|&gt;</span> <span class="fu">bind_tf_idf</span>(word, book, n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,379 × 6
   book              word      n     tf   idf tf_idf
   &lt;fct&gt;             &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 Mansfield Park    the    6206 0.0387     0      0
 2 Mansfield Park    to     5475 0.0341     0      0
 3 Mansfield Park    and    5438 0.0339     0      0
 4 Emma              to     5239 0.0325     0      0
 5 Emma              the    5201 0.0323     0      0
 6 Emma              and    4896 0.0304     0      0
 7 Mansfield Park    of     4778 0.0298     0      0
 8 Pride &amp; Prejudice the    4331 0.0354     0      0
 9 Emma              of     4291 0.0267     0      0
10 Pride &amp; Prejudice to     4162 0.0341     0      0
# ℹ 40,369 more rows</code></pre>
</div>
</div>
<p>That was not interesting at all..</p>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>austen_counts <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a></a>  <span class="fu">bind_tf_idf</span>(word, book, n) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tf_idf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,379 × 6
   book                word          n      tf   idf  tf_idf
   &lt;fct&gt;               &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 Sense &amp; Sensibility elinor      623 0.00519  1.79 0.00931
 2 Sense &amp; Sensibility marianne    492 0.00410  1.79 0.00735
 3 Mansfield Park      crawford    493 0.00307  1.79 0.00551
 4 Pride &amp; Prejudice   darcy       373 0.00305  1.79 0.00547
 5 Persuasion          elliot      254 0.00304  1.79 0.00544
 6 Emma                emma        786 0.00488  1.10 0.00536
 7 Northanger Abbey    tilney      196 0.00252  1.79 0.00452
 8 Emma                weston      389 0.00242  1.79 0.00433
 9 Pride &amp; Prejudice   bennet      294 0.00241  1.79 0.00431
10 Persuasion          wentworth   191 0.00228  1.79 0.00409
# ℹ 40,369 more rows</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>austen_counts <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a></a>  <span class="fu">bind_tf_idf</span>(word, book, n) <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a></a>  <span class="fu">group_by</span>(book) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(tf_idf, <span class="fu">fct_reorder</span>(word, tf_idf), <span class="at">fill =</span> book)) <span class="sc">+</span></span>
<span id="cb44-6"><a></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-7"><a></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>book, <span class="at">scales =</span> <span class="st">"free"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>


<img data-src="ders06_files/figure-revealjs/unnamed-chunk-28-1.png" width="960" class="r-stretch"></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>